# phpIPAM Git 工作流程指南

## 基本流程

1. 创建或切换分支进行功能开发
2. 进行代码修改
3. 每天工作结束时提交更改，使用规范的提交信息
4. 功能完成后合并到主分支

## 创建功能分支

开发新功能前，从主分支创建功能分支：

```bash
git checkout 1.7  # 当前开发分支
git checkout -b feature/功能名称
```

## 提交时机

- **每日提交**：工作日结束时提交当天所有更改
- **不要过于频繁地提交**：避免每完成小改动就提交
- **确保每次提交是可工作的状态**：不要提交中断功能的代码

## 提交规范

所有提交消息必须使用以下格式：

```
[功能类型]: 简短描述

# 变更描述（详细说明功能变动）

# 变更内容
- 项目1
- 项目2

# 解决的问题（如果适用）

# 测试情况

# 其他说明
```

**功能类型**包括：
- `[功能添加]`: 添加新功能
- `[功能修改]`: 修改现有功能
- `[错误修复]`: 修复bug
- `[性能优化]`: 优化性能
- `[安全修复]`: 修复安全问题
- `[文档更新]`: 更新文档
- `[重构]`: 代码重构
- `[测试]`: 添加或修改测试
- `[其他]`: 其他类型更改

## 常用 Git 命令

```bash
# 查看状态
git status

# 添加更改
git add .                # 添加所有更改
git add <文件路径>        # 添加特定文件

# 提交更改
git commit               # 使用默认模板提交
git commit -m "消息"      # 使用简短消息提交

# 查看历史
git log                  # 查看提交历史
git log --oneline        # 精简格式查看历史

# 分支操作
git branch               # 列出本地分支
git checkout <分支名>     # 切换分支
git merge <分支名>        # 合并指定分支到当前分支

# 远程操作
git pull                 # 拉取远程更改
git push                 # 推送本地更改到远程
```

## 每日工作流程示例

```bash
# 早上开始工作
git checkout feature/我的功能  # 切换到功能分支
git pull                     # 拉取最新更改（如果是团队协作）

# 整天进行开发...

# 晚上工作结束前
git add .                    # 添加所有更改
git commit                   # 提交更改，使用模板填写详细说明
git push                     # 推送到远程（可选）
```

## 标记版本

发布新版本时，使用标签进行标记：

```bash
git tag -a v1.7.x -m "版本1.7.x发布"
git push origin v1.7.x
```

## 维护清洁的历史

- 确保每次提交都有具体意义，代表一天的工作成果
- 使用有意义的提交消息，清晰记录功能变动
- 在推送前，如有必要可使用 `git rebase -i` 清理本地历史 